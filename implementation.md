# Реализация интегрального калькулятора

## Общая структура проекта

Проект представляет собой десктопное приложение, написанное на Python с использованием следующих основных компонентов:

1. **Графический интерфейс** (Tkinter)
   - Основное окно приложения
   - Поля для ввода функции и пределов интегрирования
   - Выпадающий список для выбора метода интегрирования
   - Кнопки для вычисления интеграла, построения графика и сравнения методов
   - Область вывода результатов

2. **Математический движок** (SymPy)
   - Парсинг математических выражений
   - Символьные вычисления
   - Численное интегрирование различными методами

3. **Визуализация** (Matplotlib)
   - Построение графиков функций
   - Отображение области интегрирования
   - Интерактивные элементы управления

## Основные классы и функции

### Перечисление `IntegrationMethod`
```python
class IntegrationMethod(Enum):
    ADAPTIVE = "Адаптивный метод"
    TRAPEZOID = "Метод трапеций"
    SIMPSON = "Метод Симпсона"
    GAUSS = "Метод Гаусса"
```
Определяет доступные методы интегрирования.

### Класс `IntegrationResult`
```python
@dataclass
class IntegrationResult:
    value: Decimal
    points: int
    is_stable: bool = True
    method: IntegrationMethod = IntegrationMethod.ADAPTIVE
```
Хранит результаты интегрирования:
- `value`: вычисленное значение интеграла
- `points`: количество использованных точек
- `is_stable`: флаг стабильности вычислений
- `method`: использованный метод интегрирования

### Класс `IntegrationConfig`
```python
class IntegrationConfig:
    def __init__(self, 
                 min_interval_size: float = 0.5,
                 max_depth: int = 10,
                 precision: int = 50,
                 max_points: int = 150,
                 min_points: int = 20,
                 stability_threshold: float = 1e10,
                 convergence_threshold: float = 0.01):
        # ...
```
Настраивает параметры интегрирования:
- `min_interval_size`: минимальный размер интервала разбиения
- `max_depth`: максимальная глубина рекурсии
- `precision`: точность вычислений
- `max_points`: максимальное количество точек
- `min_points`: минимальное количество точек
- `stability_threshold`: порог стабильности
- `convergence_threshold`: порог сходимости

### Класс `IntegralCalculator`
Основной класс приложения, реализующий:
1. Создание и настройку GUI
2. Обработку пользовательского ввода
3. Вычисление интегралов различными методами
4. Построение графиков
5. Сравнение методов интегрирования
6. Отображение результатов

## Методы интегрирования

### 1. Адаптивный метод
```python
def calculate_adaptive(expr, x, start: float, end: float, config: IntegrationConfig) -> IntegrationResult:
    # ...
```
- Рекурсивно разбивает интервал на подынтервалы
- Адаптируется к сложности функции
- Контролирует точность и стабильность

### 2. Метод трапеций
```python
def calculate_trapezoid(expr, x, start: float, end: float, config: IntegrationConfig) -> IntegrationResult:
    # ...
```
- Использует линейную интерполяцию
- Простой и надёжный метод
- Хорошо работает для гладких функций

### 3. Метод Симпсона
```python
def calculate_simpson(expr, x, start: float, end: float, config: IntegrationConfig) -> IntegrationResult:
    # ...
```
- Использует квадратичную интерполяцию
- Обеспечивает высокую точность
- Требует чётного числа интервалов

### 4. Метод Гаусса
```python
def calculate_gauss(expr, x, start: float, end: float, config: IntegrationConfig) -> IntegrationResult:
    # ...
```
- Использует квадратурные формулы Гаусса
- Обеспечивает наивысшую точность
- Эффективен для полиномов высокой степени

## Сравнение методов

Функция `compare_methods()` реализует:
1. Вычисление интеграла всеми доступными методами
2. Отображение подробной информации о каждом методе:
   - Приближенное значение
   - Количество использованных точек
   - Стабильность вычислений
3. Возможность сравнения результатов разных методов

## Пример использования

```python
# Создание экземпляра калькулятора
root = tk.Tk()
calculator = IntegralCalculator(root)

# Ввод данных
calculator.expression_var.set("x**2")
calculator.lower_bound_var.set("0")
calculator.upper_bound_var.set("1")
calculator.method_var.set(IntegrationMethod.GAUSS.value)

# Вычисление интеграла
calculator.calculate()

# Сравнение методов
calculator.compare_methods()

# Построение графика
calculator.plot_graph()
```

## Особенности реализации

1. **Точность вычислений**
   - Использование Decimal для высокой точности
   - Адаптивный выбор количества точек
   - Контроль погрешности
   - Сравнение различных методов

2. **Устойчивость**
   - Проверка стабильности вычислений
   - Обработка особых случаев
   - Защита от переполнения

3. **Интерфейс**
   - Интуитивно понятный дизайн
   - Подсказки и примеры
   - Выбор метода интегрирования
   - Сравнение методов в отдельном окне

4. **Визуализация**
   - Построение графиков в отдельном окне
   - Возможность масштабирования
   - Настройка стиля отображения

## Требования к системе

- Python 3.8+
- Библиотеки:
  - tkinter
  - sympy
  - matplotlib
  - numpy
- Операционная система: Windows, Linux, macOS 